<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presidio Browser Anonymizer - Settings</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f9fafb;
            color: #111827;
            overflow-x: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 256px;
            background: #1f2937;
            color: white;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .logo-svg {
            width: 40px;
            height: 40px;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-text-main {
            font-size: 18px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .logo-text-sub {
            font-size: 11px;
            color: #9ca3af;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .lang-switcher {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .lang-flag {
            width: 32px;
            height: 32px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
            opacity: 0.5;
        }

        .lang-flag:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        .lang-flag.active {
            opacity: 1;
            box-shadow: 0 0 0 2px #60a5fa, 0 0 0 4px #1f2937;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            color: #d1d5db;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
        }

        .nav-item:hover {
            background: #374151;
        }

        .nav-item.active {
            background: #2563eb;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 12px;
            color: #9ca3af;
        }

        .sidebar-footer a {
            color: #60a5fa;
            text-decoration: none;
        }

        /* Main Content */
        .main-content {
            margin-left: 256px;
            padding: 40px;
            min-height: 100vh;
        }

        .page-header {
            margin-bottom: 24px;
        }

        .page-title {
            font-size: 30px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 4px;
        }

        .page-subtitle {
            color: #6b7280;
            font-size: 14px;
        }

        /* Status Card */
        .status-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .status-card h2 {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 9999px;
            font-size: 14px;
            font-weight: 500;
        }

        .status-badge.online {
            background: rgba(16, 185, 129, 0.1);
            color: #059669;
        }

        .status-badge.offline {
            background: rgba(239, 68, 68, 0.1);
            color: #dc2626;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .status-dot.online {
            background: #10b981;
        }

        .status-dot.offline {
            background: #ef4444;
        }

        /* Category Sections */
        .category-section {
            margin-bottom: 32px;
        }

        .category-header {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 12px;
            margin-bottom: 24px;
        }

        .entity-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        @media (max-width: 1400px) {
            .entity-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 900px) {
            .entity-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Entity Card */
        .entity-card {
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .entity-card:hover {
            border-color: #60a5fa;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .entity-card.enabled {
            background: #eff6ff;
            border-color: #2563eb;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .entity-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .entity-name {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
        }

        .entity-card.enabled .entity-name {
            color: #1e40af;
        }

        .entity-description {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .entity-example {
            display: block;
            font-size: 12px;
            font-family: 'Courier New', monospace;
            padding: 8px;
            border-radius: 6px;
            background: #f3f4f6;
            color: #6b7280;
        }

        .entity-card.enabled .entity-example {
            background: #dbeafe;
            color: #1e40af;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            border-radius: 9999px;
            background: #d1d5db;
            transition: background 0.3s;
        }

        .toggle-switch.enabled {
            background: #2563eb;
        }

        .toggle-knob {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }

        .toggle-switch.enabled .toggle-knob {
            transform: translateX(24px);
        }

        /* Bottom Action Bar */
        .action-bar {
            position: sticky;
            bottom: 24px;
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: flex-end;
            gap: 16px;
            margin-top: 32px;
        }

        .btn {
            padding: 10px 24px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-reset {
            background: #e5e7eb;
            color: #374151;
        }

        .btn-reset:hover {
            background: #d1d5db;
        }

        .btn-save {
            background: #2563eb;
            color: white;
        }

        .btn-save:hover {
            background: #1d4ed8;
        }

        .btn-save:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid white;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 32px;
            right: 32px;
            background: #10b981;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            font-weight: 500;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 9999;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast-icon {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <svg class="logo-svg" viewBox="0 0 200 240" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="shieldGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#1e40af;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M100 10 L170 50 V115 C170 150 140 195 100 220 C60 195 30 150 30 115 V50 Z"
                          fill="url(#shieldGradient)" stroke="#1e3a8a" stroke-width="3"/>
                    <rect x="80" y="95" width="40" height="50" rx="4" fill="white"/>
                    <circle cx="100" cy="80" r="15" fill="none" stroke="white" stroke-width="6"/>
                    <circle cx="100" cy="115" r="6" fill="#2563eb"/>
                    <line x1="100" y1="121" x2="100" y2="132" stroke="#2563eb" stroke-width="4" stroke-linecap="round"/>
                    <rect x="85" y="160" width="10" height="45" rx="3" fill="white" opacity="0.4"/>
                    <rect x="105" y="160" width="10" height="45" rx="3" fill="white" opacity="0.4"/>
                </svg>
                <div class="logo-text">
                    <div class="logo-text-main">Presidio</div>
                    <div class="logo-text-sub">ANONYMIZER</div>
                </div>
            </div>

            <div class="lang-switcher">
                <svg class="lang-flag active" data-lang="pl" viewBox="0 0 640 480">
                    <rect width="640" height="240" fill="#fff"/>
                    <rect y="240" width="640" height="240" fill="#dc143c"/>
                </svg>
                <svg class="lang-flag" data-lang="en" viewBox="0 0 60 30">
                    <clipPath id="s"><path d="M0,0 v30 h60 v-30 z"/></clipPath>
                    <clipPath id="t"><path d="M30,15 h30 v15 z v-15 h-30 z h-30 v15 z v-15 h30 z"/></clipPath>
                    <g clip-path="url(#s)"><path d="M0,0 v30 h60 v-30 z" fill="#012169"/><path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"/><path d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)" stroke="#C8102E" stroke-width="4"/><path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/><path d="M30,0 v30 M0,15 h60" stroke="#C8102E" stroke-width="6"/></g>
                </svg>
                <svg class="lang-flag" data-lang="de" viewBox="0 0 640 480">
                    <rect width="640" height="160" y="0" fill="#000"/>
                    <rect width="640" height="160" y="160" fill="#D00"/>
                    <rect width="640" height="160" y="320" fill="#FFCE00"/>
                </svg>
            </div>
        </div>

        <div class="sidebar-nav">
            <a href="dashboard.html" class="nav-item">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                <span id="nav-dashboard">Dashboard</span>
            </a>
            <a href="index.html" class="nav-item active">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
                <span id="nav-settings">Ustawienia</span>
            </a>
        </div>

        <div class="sidebar-footer">
            <div id="footer-version">Wersja 1.1.0</div>
            <div id="footer-author">Stworzone przez <a href="https://github.com/gacabartosz" target="_blank">gacabartosz</a></div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="page-header">
            <h1 class="page-title" id="page-title">Ustawienia Anonimizacji</h1>
            <p class="page-subtitle" id="page-subtitle">ZarzƒÖdzaj typami danych osobowych, kt√≥re majƒÖ byƒá wykrywane i anonimowane.</p>
        </div>

        <!-- Status Card -->
        <div class="status-card">
            <h2 id="status-title">Status Us≈Çugi</h2>
            <div class="status-badge online" id="status-badge">
                <div class="status-dot online" id="status-dot"></div>
                <span id="status-text">Sprawdzanie...</span>
            </div>
        </div>

        <!-- Categories -->
        <div id="categories-container"></div>

        <!-- Action Bar -->
        <div class="action-bar">
            <button class="btn btn-reset" id="btn-reset">Resetuj do Domy≈õlnych</button>
            <button class="btn btn-save" id="btn-save">
                <span id="btn-save-text">Zapisz Ustawienia</span>
            </button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span id="toast-message">Ustawienia zapisane pomy≈õlnie!</span>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:4222/api';

        // Default entity states
        const defaultEntityState = {
            // Polish Data (12 - enabled by default)
            EMAIL_ADDRESS: true,
            PL_PESEL: true,
            PL_NIP: true,
            PL_PASSPORT: true,
            PL_ID_CARD: true,
            PHONE_NUMBER: true,
            CREDIT_CARD: true,
            IBAN_CODE: true,
            IP_ADDRESS: true,
            URL: true,
            DATE_TIME: true,
            LOCATION: true,
            // US Data (5 - disabled by default)
            US_SSN: false,
            US_PASSPORT: false,
            US_BANK_NUMBER: false,
            US_DRIVER_LICENSE: false,
            US_ITIN: false,
            // Other Countries (7 - disabled by default)
            UK_NHS: false,
            AU_ABN: false,
            AU_ACN: false,
            AU_TFN: false,
            AU_MEDICARE: false,
            SG_NRIC_FIN: false,
            NRP: false,
            // Other (4 - disabled by default)
            PERSON: false,
            CRYPTO: false,
            MEDICAL_LICENSE: false,
            PL_REGON: false,
        };

        // Translations
        const translations = {
            pl: {
                sidebar: {
                    dashboard: 'Dashboard',
                    settings: 'Ustawienia',
                    version: 'Wersja',
                    author: 'Stworzone przez',
                },
                settings: {
                    title: 'Ustawienia Anonimizacji',
                    subtitle: 'ZarzƒÖdzaj typami danych osobowych, kt√≥re majƒÖ byƒá wykrywane i anonimowane.',
                    serviceStatus: 'Status Us≈Çugi',
                    saveButton: 'Zapisz Ustawienia',
                    saving: 'Zapisywanie...',
                    resetButton: 'Resetuj do Domy≈õlnych',
                    notifications: {
                        saved: 'Ustawienia zapisane pomy≈õlnie!',
                        saveError: 'B≈ÇƒÖd podczas zapisywania ustawie≈Ñ.',
                        reset: 'Przywr√≥cono ustawienia domy≈õlne.',
                    },
                    categories: {
                        pl: 'üáµüá± Polskie dane',
                        us: 'üá∫üá∏ Dane USA',
                        world: 'üåç Inne kraje',
                        other: 'üîê Inne',
                    },
                    status: {
                        checking: 'Sprawdzanie...',
                        online: 'Online',
                        offline: 'Offline',
                    },
                    entities: [
                        { name: 'EMAIL_ADDRESS', displayName: 'Adres Email', description: 'Adresy poczty elektronicznej.', example: 'jan@example.com ‚Üí [EMAIL]', category: 'pl' },
                        { name: 'PL_PESEL', displayName: 'PESEL', description: 'Polski numer identyfikacyjny.', example: '92010212345 ‚Üí [PESEL]', category: 'pl' },
                        { name: 'PL_NIP', displayName: 'NIP', description: 'Polski numer identyfikacji podatkowej.', example: '123-456-78-90 ‚Üí [NIP]', category: 'pl' },
                        { name: 'PHONE_NUMBER', displayName: 'Numer Telefonu', description: 'Numery telefon√≥w.', example: '+48 123 456 789 ‚Üí [TELEFON]', category: 'pl' },
                        { name: 'URL', displayName: 'Adres URL', description: 'Adresy stron internetowych.', example: 'https://example.com ‚Üí [URL]', category: 'pl' },
                        { name: 'IP_ADDRESS', displayName: 'Adres IP', description: 'Adresy protoko≈Çu internetowego.', example: '192.168.1.1 ‚Üí [IP]', category: 'pl' },
                        { name: 'DATE_TIME', displayName: 'Data i Czas', description: 'Daty i znaczniki czasowe.', example: '2024-12-10 ‚Üí [DATA]', category: 'pl' },
                        { name: 'LOCATION', displayName: 'Lokalizacja', description: 'Miejsca geograficzne.', example: 'Warszawa ‚Üí [LOKALIZACJA]', category: 'pl' },
                        { name: 'CREDIT_CARD', displayName: 'Karta Kredytowa', description: 'Numery kart kredytowych.', example: '4111...1111 ‚Üí [KARTA]', category: 'pl' },
                        { name: 'IBAN_CODE', displayName: 'Numer Konta IBAN', description: 'Miƒôdzynarodowy numer rachunku bankowego.', example: 'PL61...2345 ‚Üí [IBAN]', category: 'pl' },
                        { name: 'PL_PASSPORT', displayName: 'Numer Paszportu', description: 'Polski numer paszportu.', example: 'AB1234567 ‚Üí [PASZPORT_PL]', category: 'pl' },
                        { name: 'PL_ID_CARD', displayName: 'Numer Dowodu', description: 'Polski numer dowodu osobistego.', example: 'ASY123456 ‚Üí [DOWOD_PL]', category: 'pl' },
                        { name: 'US_SSN', displayName: 'Numer SSN (USA)', description: 'Ameryka≈Ñski numer ubezpieczenia spo≈Çecznego.', example: '000-00-0000 ‚Üí [SSN]', category: 'us' },
                        { name: 'US_PASSPORT', displayName: 'Paszport (USA)', description: 'Numer paszportu Stan√≥w Zjednoczonych.', example: '123456789 ‚Üí [PASZPORT_US]', category: 'us' },
                        { name: 'US_BANK_NUMBER', displayName: 'Numer konta (USA)', description: 'Numer konta bankowego w USA.', example: '987654321 ‚Üí [BANK_US]', category: 'us' },
                        { name: 'US_DRIVER_LICENSE', displayName: 'Prawo jazdy (USA)', description: 'Numer prawa jazdy w USA.', example: 'D12345678 ‚Üí [PRAWO_JAZDY_US]', category: 'us' },
                        { name: 'US_ITIN', displayName: 'Numer ITIN (USA)', description: 'Ameryka≈Ñski numer identyfikacji podatkowej.', example: '9XX-7X-XXXX ‚Üí [ITIN]', category: 'us' },
                        { name: 'UK_NHS', displayName: 'Numer NHS (UK)', description: 'Numer National Health Service w Wielkiej Brytanii.', example: '123 456 7890 ‚Üí [NHS]', category: 'world' },
                        { name: 'AU_ABN', displayName: 'Numer ABN (AU)', description: 'Australijski numer biznesowy.', example: '00 000 000 000 ‚Üí [ABN]', category: 'world' },
                        { name: 'AU_ACN', displayName: 'Numer ACN (AU)', description: 'Australijski numer firmowy.', example: '000 000 000 ‚Üí [ACN]', category: 'world' },
                        { name: 'AU_TFN', displayName: 'Numer TFN (AU)', description: 'Australijski numer identyfikacji podatkowej.', example: '123 456 789 ‚Üí [TFN]', category: 'world' },
                        { name: 'AU_MEDICARE', displayName: 'Numer Medicare (AU)', description: 'Numer karty Medicare w Australii.', example: '1234 56789 0 ‚Üí [MEDICARE_AU]', category: 'world' },
                        { name: 'SG_NRIC_FIN', displayName: 'NRIC/FIN (SG)', description: 'Singapurski numer identyfikacyjny.', example: 'S1234567A ‚Üí [NRIC_SG]', category: 'world' },
                        { name: 'NRP', displayName: 'Numer NRP (UK)', description: 'Numer National Registry of Public Service Interpreters w UK.', example: '12345 ‚Üí [NRP]', category: 'world' },
                        { name: 'PERSON', displayName: 'Osoba', description: 'Imiona i nazwiska os√≥b.', example: 'Jan Kowalski ‚Üí [OSOBA]', category: 'other' },
                        { name: 'CRYPTO', displayName: 'Adres Krypto', description: 'Adresy portfeli kryptowalutowych (np. Bitcoin).', example: '1A1zP1eP5QGefi2D... ‚Üí [CRYPTO]', category: 'other' },
                        { name: 'MEDICAL_LICENSE', displayName: 'Licencja Medyczna', description: 'Numer licencji medycznej.', example: 'G1234567 ‚Üí [LICENCJA_MED]', category: 'other' },
                        { name: 'PL_REGON', displayName: 'REGON', description: 'Polski numer identyfikacyjny REGON.', example: '123456789 ‚Üí [REGON]', category: 'other' },
                    ]
                },
            },
            en: {
                sidebar: {
                    dashboard: 'Dashboard',
                    settings: 'Settings',
                    version: 'Version',
                    author: 'Created by',
                },
                settings: {
                    title: 'Anonymization Settings',
                    subtitle: 'Manage which types of personal data are detected and anonymized.',
                    serviceStatus: 'Service Status',
                    saveButton: 'Save Settings',
                    saving: 'Saving...',
                    resetButton: 'Reset to Default',
                    notifications: {
                        saved: 'Settings saved successfully!',
                        saveError: 'Error while saving settings.',
                        reset: 'Default settings restored.',
                    },
                    categories: {
                        pl: 'üáµüá± Polish Data',
                        us: 'üá∫üá∏ US Data',
                        world: 'üåç Other Countries',
                        other: 'üîê Other',
                    },
                    status: {
                        checking: 'Checking...',
                        online: 'Online',
                        offline: 'Offline',
                    },
                    entities: [
                        { name: 'EMAIL_ADDRESS', displayName: 'Email Address', description: 'Standard email addresses.', example: 'john@example.com ‚Üí [EMAIL]', category: 'pl' },
                        { name: 'PL_PESEL', displayName: 'PESEL', description: 'Polish national identification number.', example: '92010212345 ‚Üí [PESEL]', category: 'pl' },
                        { name: 'PL_NIP', displayName: 'NIP', description: 'Polish tax identification number.', example: '123-456-78-90 ‚Üí [NIP]', category: 'pl' },
                        { name: 'PHONE_NUMBER', displayName: 'Phone Number', description: 'Standard phone numbers.', example: '+44 123 456 789 ‚Üí [PHONE]', category: 'pl' },
                        { name: 'URL', displayName: 'URL Address', description: 'Website addresses.', example: 'https://example.com ‚Üí [URL]', category: 'pl' },
                        { name: 'IP_ADDRESS', displayName: 'IP Address', description: 'Internet Protocol addresses.', example: '192.168.1.1 ‚Üí [IP]', category: 'pl' },
                        { name: 'DATE_TIME', displayName: 'Date & Time', description: 'Dates and timestamps.', example: '2024-12-10 ‚Üí [DATE]', category: 'pl' },
                        { name: 'LOCATION', displayName: 'Location', description: 'Geographical places.', example: 'Warsaw ‚Üí [LOCATION]', category: 'pl' },
                        { name: 'CREDIT_CARD', displayName: 'Credit Card', description: 'Credit card numbers.', example: '4111...1111 ‚Üí [CARD]', category: 'pl' },
                        { name: 'IBAN_CODE', displayName: 'IBAN Code', description: 'International Bank Account Number.', example: 'GB99...2345 ‚Üí [IBAN]', category: 'pl' },
                        { name: 'PL_PASSPORT', displayName: 'Passport Number', description: 'Polish passport number.', example: 'AB1234567 ‚Üí [PASSPORT_PL]', category: 'pl' },
                        { name: 'PL_ID_CARD', displayName: 'ID Card Number', description: 'Polish ID card number.', example: 'ASY123456 ‚Üí [ID_PL]', category: 'pl' },
                        { name: 'US_SSN', displayName: 'SSN (USA)', description: 'United States Social Security number.', example: '000-00-0000 ‚Üí [SSN]', category: 'us' },
                        { name: 'US_PASSPORT', displayName: 'Passport (USA)', description: 'United States passport number.', example: '123456789 ‚Üí [PASSPORT_US]', category: 'us' },
                        { name: 'US_BANK_NUMBER', displayName: 'Bank Account (USA)', description: 'United States bank account number.', example: '987654321 ‚Üí [BANK_US]', category: 'us' },
                        { name: 'US_DRIVER_LICENSE', displayName: 'Driver License (USA)', description: 'United States driver license number.', example: 'D12345678 ‚Üí [LICENSE_US]', category: 'us' },
                        { name: 'US_ITIN', displayName: 'ITIN (USA)', description: 'Individual Taxpayer Identification Number.', example: '9XX-7X-XXXX ‚Üí [ITIN]', category: 'us' },
                        { name: 'UK_NHS', displayName: 'NHS Number (UK)', description: 'UK National Health Service number.', example: '123 456 7890 ‚Üí [NHS]', category: 'world' },
                        { name: 'AU_ABN', displayName: 'ABN (AU)', description: 'Australian Business Number.', example: '00 000 000 000 ‚Üí [ABN]', category: 'world' },
                        { name: 'AU_ACN', displayName: 'ACN (AU)', description: 'Australian Company Number.', example: '000 000 000 ‚Üí [ACN]', category: 'world' },
                        { name: 'AU_TFN', displayName: 'TFN (AU)', description: 'Australian Tax File Number.', example: '123 456 789 ‚Üí [TFN]', category: 'world' },
                        { name: 'AU_MEDICARE', displayName: 'Medicare (AU)', description: 'Australian Medicare card number.', example: '1234 56789 0 ‚Üí [MEDICARE_AU]', category: 'world' },
                        { name: 'SG_NRIC_FIN', displayName: 'NRIC/FIN (SG)', description: 'Singapore National Registration Identity Card.', example: 'S1234567A ‚Üí [NRIC_SG]', category: 'world' },
                        { name: 'NRP', displayName: 'NRP Number (UK)', description: 'UK National Registry of Public Service Interpreters number.', example: '12345 ‚Üí [NRP]', category: 'world' },
                        { name: 'PERSON', displayName: 'Person', description: 'Full names of people.', example: 'John Doe ‚Üí [PERSON]', category: 'other' },
                        { name: 'CRYPTO', displayName: 'Crypto Address', description: 'Cryptocurrency wallet addresses (e.g., Bitcoin).', example: '1A1zP1eP5QGefi2D... ‚Üí [CRYPTO]', category: 'other' },
                        { name: 'MEDICAL_LICENSE', displayName: 'Medical License', description: 'Medical license numbers.', example: 'G1234567 ‚Üí [MED_LICENSE]', category: 'other' },
                        { name: 'PL_REGON', displayName: 'REGON', description: 'Polish business identification number.', example: '123456789 ‚Üí [REGON]', category: 'other' },
                    ]
                },
            },
            de: {
                sidebar: {
                    dashboard: 'Dashboard',
                    settings: 'Einstellungen',
                    version: 'Version',
                    author: 'Erstellt von',
                },
                settings: {
                    title: 'Anonymisierungseinstellungen',
                    subtitle: 'Verwalten Sie, welche Arten von personenbezogenen Daten erkannt und anonymisiert werden sollen.',
                    serviceStatus: 'Dienststatus',
                    saveButton: 'Einstellungen speichern',
                    saving: 'Speichern...',
                    resetButton: 'Auf Standard zur√ºcksetzen',
                    notifications: {
                        saved: 'Einstellungen erfolgreich gespeichert!',
                        saveError: 'Fehler beim Speichern der Einstellungen.',
                        reset: 'Standardeinstellungen wiederhergestellt.',
                    },
                    categories: {
                        pl: 'üáµüá± Polnische Daten',
                        us: 'üá∫üá∏ US-Daten',
                        world: 'üåç Andere L√§nder',
                        other: 'üîê Andere',
                    },
                    status: {
                        checking: '√úberpr√ºfe...',
                        online: 'Online',
                        offline: 'Offline',
                    },
                    entities: [
                        { name: 'EMAIL_ADDRESS', displayName: 'E-Mail-Adresse', description: 'Standard-E-Mail-Adressen.', example: 'john@example.com ‚Üí [EMAIL]', category: 'pl' },
                        { name: 'PL_PESEL', displayName: 'PESEL', description: 'Polnische nationale Identifikationsnummer.', example: '92010212345 ‚Üí [PESEL]', category: 'pl' },
                        { name: 'PL_NIP', displayName: 'NIP', description: 'Polnische Steueridentifikationsnummer.', example: '123-456-78-90 ‚Üí [NIP]', category: 'pl' },
                        { name: 'PHONE_NUMBER', displayName: 'Telefonnummer', description: 'Standard-Telefonnummern.', example: '+49 123 456789 ‚Üí [PHONE]', category: 'pl' },
                        { name: 'URL', displayName: 'URL-Adresse', description: 'Webseitenadressen.', example: 'https://example.com ‚Üí [URL]', category: 'pl' },
                        { name: 'IP_ADDRESS', displayName: 'IP-Adresse', description: 'Internetprotokoll-Adressen.', example: '192.168.1.1 ‚Üí [IP]', category: 'pl' },
                        { name: 'DATE_TIME', displayName: 'Datum & Uhrzeit', description: 'Daten und Zeitstempel.', example: '2024-12-10 ‚Üí [DATE]', category: 'pl' },
                        { name: 'LOCATION', displayName: 'Standort', description: 'Geografische Orte.', example: 'Berlin ‚Üí [LOCATION]', category: 'pl' },
                        { name: 'CREDIT_CARD', displayName: 'Kreditkarte', description: 'Kreditkartennummern.', example: '4111...1111 ‚Üí [CARD]', category: 'pl' },
                        { name: 'IBAN_CODE', displayName: 'IBAN-Code', description: 'Internationale Bankkontonummer.', example: 'DE89...2345 ‚Üí [IBAN]', category: 'pl' },
                        { name: 'PL_PASSPORT', displayName: 'Reisepassnummer', description: 'Polnische Reisepassnummer.', example: 'AB1234567 ‚Üí [PASSPORT_PL]', category: 'pl' },
                        { name: 'PL_ID_CARD', displayName: 'Personalausweisnummer', description: 'Polnische Personalausweisnummer.', example: 'ASY123456 ‚Üí [ID_PL]', category: 'pl' },
                        { name: 'US_SSN', displayName: 'SSN (USA)', description: 'Sozialversicherungsnummer der Vereinigten Staaten.', example: '000-00-0000 ‚Üí [SSN]', category: 'us' },
                        { name: 'US_PASSPORT', displayName: 'Reisepass (USA)', description: 'Reisepassnummer der Vereinigten Staaten.', example: '123456789 ‚Üí [PASSPORT_US]', category: 'us' },
                        { name: 'US_BANK_NUMBER', displayName: 'Bankkonto (USA)', description: 'Bankkontonummer der Vereinigten Staaten.', example: '987654321 ‚Üí [BANK_US]', category: 'us' },
                        { name: 'US_DRIVER_LICENSE', displayName: 'F√ºhrerschein (USA)', description: 'F√ºhrerscheinnummer der Vereinigten Staaten.', example: 'D12345678 ‚Üí [LICENSE_US]', category: 'us' },
                        { name: 'US_ITIN', displayName: 'ITIN (USA)', description: 'Steuer-Identifikationsnummer f√ºr Einzelpersonen.', example: '9XX-7X-XXXX ‚Üí [ITIN]', category: 'us' },
                        { name: 'UK_NHS', displayName: 'NHS-Nummer (UK)', description: 'Nummer des National Health Service im Vereinigten K√∂nigreich.', example: '123 456 7890 ‚Üí [NHS]', category: 'world' },
                        { name: 'AU_ABN', displayName: 'ABN (AU)', description: 'Australische Gesch√§ftsnummer.', example: '00 000 000 000 ‚Üí [ABN]', category: 'world' },
                        { name: 'AU_ACN', displayName: 'ACN (AU)', description: 'Australische Firmennummer.', example: '000 000 000 ‚Üí [ACN]', category: 'world' },
                        { name: 'AU_TFN', displayName: 'TFN (AU)', description: 'Australische Steuer-Identifikationsnummer.', example: '123 456 789 ‚Üí [TFN]', category: 'world' },
                        { name: 'AU_MEDICARE', displayName: 'Medicare (AU)', description: 'Australische Medicare-Kartennummer.', example: '1234 56789 0 ‚Üí [MEDICARE_AU]', category: 'world' },
                        { name: 'SG_NRIC_FIN', displayName: 'NRIC/FIN (SG)', description: 'Singapurische Nationale Registrierungs-Identit√§tskarte.', example: 'S1234567A ‚Üí [NRIC_SG]', category: 'world' },
                        { name: 'NRP', displayName: 'NRP-Nummer (UK)', description: 'Nummer des Nationalen Registers f√ºr Dolmetscher im √∂ffentlichen Dienst in Gro√übritannien.', example: '12345 ‚Üí [NRP]', category: 'world' },
                        { name: 'PERSON', displayName: 'Person', description: 'Vollst√§ndige Namen von Personen.', example: 'Max Mustermann ‚Üí [PERSON]', category: 'other' },
                        { name: 'CRYPTO', displayName: 'Krypto-Adresse', description: 'Adressen von Kryptow√§hrungs-Wallets (z.B. Bitcoin).', example: '1A1zP1eP5QGefi2D... ‚Üí [CRYPTO]', category: 'other' },
                        { name: 'MEDICAL_LICENSE', displayName: '√Ñrztliche Zulassung', description: 'Nummern von √§rztlichen Zulassungen.', example: 'G1234567 ‚Üí [MED_LICENSE]', category: 'other' },
                        { name: 'PL_REGON', displayName: 'REGON', description: 'Polnische Gesch√§ftsidentifikationsnummer.', example: '123456789 ‚Üí [REGON]', category: 'other' },
                    ]
                },
            },
        };

        let currentLang = 'pl';
        let entitySettings = { ...defaultEntityState };
        let isSaving = false;

        // Initialize
        function init() {
            setupLanguageSwitcher();
            checkHealth();
            loadSettings();
            renderCategories();
            setupActionButtons();
        }

        // Language Switcher
        function setupLanguageSwitcher() {
            const flags = document.querySelectorAll('.lang-flag');
            flags.forEach(flag => {
                flag.addEventListener('click', () => {
                    const lang = flag.getAttribute('data-lang');
                    switchLanguage(lang);
                });
            });
        }

        function switchLanguage(lang) {
            currentLang = lang;

            // Update flag active state
            document.querySelectorAll('.lang-flag').forEach(f => f.classList.remove('active'));
            document.querySelector(`[data-lang="${lang}"]`).classList.add('active');

            // Update UI
            updateUILanguage();
            renderCategories();
        }

        function updateUILanguage() {
            const t = translations[currentLang];

            document.getElementById('nav-dashboard').textContent = t.sidebar.dashboard;
            document.getElementById('nav-settings').textContent = t.sidebar.settings;
            document.getElementById('footer-version').textContent = `${t.sidebar.version} 1.1.0`;
            document.getElementById('footer-author').innerHTML = `${t.sidebar.author} <a href="https://github.com/gacabartosz" target="_blank">gacabartosz</a>`;

            document.getElementById('page-title').textContent = t.settings.title;
            document.getElementById('page-subtitle').textContent = t.settings.subtitle;
            document.getElementById('status-title').textContent = t.settings.serviceStatus;

            document.getElementById('btn-reset').textContent = t.settings.resetButton;
            document.getElementById('btn-save-text').textContent = isSaving ? t.settings.saving : t.settings.saveButton;
        }

        // Health Check
        async function checkHealth() {
            const t = translations[currentLang];
            const statusBadge = document.getElementById('status-badge');
            const statusDot = document.getElementById('status-dot');
            const statusText = document.getElementById('status-text');

            statusText.textContent = t.settings.status.checking;

            try {
                const response = await fetch(`${API_BASE_URL}/health`);
                const data = await response.json();

                if (data.status === 'ok') {
                    statusBadge.className = 'status-badge online';
                    statusDot.className = 'status-dot online';
                    statusText.textContent = t.settings.status.online;
                } else {
                    throw new Error('Service offline');
                }
            } catch (error) {
                statusBadge.className = 'status-badge offline';
                statusDot.className = 'status-dot offline';
                statusText.textContent = t.settings.status.offline;
            }
        }

        // Load Settings
        async function loadSettings() {
            try {
                const response = await fetch(`${API_BASE_URL}/settings`);
                if (response.ok) {
                    const data = await response.json();
                    entitySettings = { ...defaultEntityState, ...data };
                } else {
                    entitySettings = { ...defaultEntityState };
                }
            } catch (error) {
                console.error('Failed to load settings:', error);
                entitySettings = { ...defaultEntityState };
            }
            renderCategories();
        }

        // Render Categories
        function renderCategories() {
            const t = translations[currentLang];
            const container = document.getElementById('categories-container');
            container.innerHTML = '';

            const categoryOrder = ['pl', 'us', 'world', 'other'];

            categoryOrder.forEach(categoryKey => {
                const entities = t.settings.entities.filter(e => e.category === categoryKey);

                if (entities.length === 0) return;

                const section = document.createElement('div');
                section.className = 'category-section';

                const header = document.createElement('h2');
                header.className = 'category-header';
                header.textContent = `${t.settings.categories[categoryKey]} (${entities.length})`;
                section.appendChild(header);

                const grid = document.createElement('div');
                grid.className = 'entity-grid';

                entities.sort((a, b) => a.displayName.localeCompare(b.displayName)).forEach(entity => {
                    const enabled = entitySettings[entity.name] ?? false;

                    const card = document.createElement('div');
                    card.className = `entity-card ${enabled ? 'enabled' : ''}`;
                    card.onclick = () => toggleEntity(entity.name);

                    card.innerHTML = `
                        <div class="entity-card-header">
                            <h3 class="entity-name">${entity.displayName}</h3>
                            <div class="toggle-switch ${enabled ? 'enabled' : ''}">
                                <div class="toggle-knob"></div>
                            </div>
                        </div>
                        <p class="entity-description">${entity.description}</p>
                        <code class="entity-example">${entity.example}</code>
                    `;

                    grid.appendChild(card);
                });

                section.appendChild(grid);
                container.appendChild(section);
            });
        }

        // Toggle Entity
        function toggleEntity(entityName) {
            entitySettings[entityName] = !entitySettings[entityName];
            renderCategories();
        }

        // Action Buttons
        function setupActionButtons() {
            document.getElementById('btn-reset').addEventListener('click', handleReset);
            document.getElementById('btn-save').addEventListener('click', handleSave);
        }

        function handleReset() {
            entitySettings = { ...defaultEntityState };
            renderCategories();
            showToast(translations[currentLang].settings.notifications.reset);
        }

        async function handleSave() {
            if (isSaving) return;

            isSaving = true;
            const btnSave = document.getElementById('btn-save');
            const btnSaveText = document.getElementById('btn-save-text');

            btnSave.disabled = true;
            btnSaveText.textContent = translations[currentLang].settings.saving;

            try {
                const response = await fetch(`${API_BASE_URL}/settings`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(entitySettings),
                });

                if (response.ok) {
                    showToast(translations[currentLang].settings.notifications.saved);
                } else {
                    throw new Error('Save failed');
                }
            } catch (error) {
                console.error('Failed to save settings:', error);
                showToast(translations[currentLang].settings.notifications.saveError);
            } finally {
                isSaving = false;
                btnSave.disabled = false;
                btnSaveText.textContent = translations[currentLang].settings.saveButton;
            }
        }

        // Toast Notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');

            toastMessage.textContent = message;
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Start
        init();
    </script>
</body>
</html>
